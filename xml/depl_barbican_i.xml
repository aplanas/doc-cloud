<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<!-- Converted by suse-upgrade version 1.1 -->
<sect1 xmlns="http://docbook.org/ns/docbook"
       xmlns:xi="http://www.w3.org/2001/XInclude"
       xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
       xml:id="sec.depl.ostack.barbican">

    <title>Deploying &secret_store; (Optional)</title>
    <para>&secret_store; is a component designed for storing secrets in a secure and standardized manner protected by &o_ident; authentication. Secrets include SSL certificates and passwords used by various &ostack; components.</para>
    <para>&secret_store; settings can be configured in <literal>Raw</literal> mode only. To do this, open the &secret_store; &barcl; <guimenu>Attribute
     </guimenu>configuration in <guimenu>Raw</guimenu> mode.</para>

      <figure>
        <title>The &secret_store; &Barcl;: Raw Mode</title>
        <mediaobject>
          <imageobject role="fo">
       <imagedata fileref="depl_barclamp_barbican_raw.png" width="100%" format="png"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="depl_barclamp_barbican_raw.png" width="75%" format="png"/>
      </imageobject>
     </mediaobject>
    </figure>

    <para>When configuring &secret_store;, pay particular attention to the following settings:</para>
     <itemizedlist>
       <listitem>
         <para><literal>bind_host</literal> Bind host for the &secret_store; API service</para>
       </listitem>
       <listitem>
         <para><literal>bind_port</literal> Bind port for the &secret_store; API service</para>
       </listitem>
       <listitem>
         <para><literal>processes</literal> Number of API processes to run in Apache</para>
       </listitem>
       <listitem>
         <para><literal>ssl</literal> Enable or disable SSL</para>
       </listitem>
       <listitem>
         <para><literal>threads</literal> Number of API worker threads</para>
       </listitem>
       <listitem>
         <para><literal>debug</literal> Enable or disable debug logging</para>
       </listitem>
       <listitem>
         <para><literal>enable_keystone_listener</literal> Enable or disable the &o_ident; listener services</para>
       </listitem>
       <listitem>
         <para><literal>kek</literal> An encryption key (fixed-length 32-byte Base64-encoded value) for &secret_store;'s <systemitem>simple_crypto</systemitem> plugin. If left unspecified, the key will be generated automatically.</para>

         <note>
           <title>Existing Encryption Key</title>
           <para>If you plan to restore and use the existing &secret_store; database after a full reinstall (including a complete wipe of the Crowbar node), make sure to save the specified encryption key beforehand. You will need to provide it after the full reinstall in order to access the data in the restored &secret_store; database.</para>
         </note>
       </listitem>
     </itemizedlist>
<sect2 xml:id="sec.depl.ostack.barbican.ha">
   <title>&haSetup; for &secret_store;</title>
   <para>
    To make &secret_store; highly available, assign the <guimenu>barbican-controller</guimenu> role to the Controller Cluster.
   </para>
  </sect2>
  </sect1>
