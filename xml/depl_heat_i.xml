<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<!-- Converted by suse-upgrade version 1.1 -->
<sect1 xmlns="http://docbook.org/ns/docbook"
       xmlns:xi="http://www.w3.org/2001/XInclude"
       xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
       xml:id="sec.depl.ostack.heat">

  <title>Deploying &o_orch; (Optional)</title>

  <para>
   &o_orch; is a template-based orchestration engine that enables you to, for
   example, start workloads requiring multiple servers or to automatically
   restart &vmguest;s if needed. It also brings auto-scaling to &cloud; by
   automatically starting additional &vmguest;s if certain criteria are
   met. For more information about &o_orch; refer to the &ostack; documentation
   at <link xlink:href="http://docs.openstack.org/developer/heat/"/>.
  </para>

  <para>
   &o_orch; should be deployed on a &contrnode;. To make &o_orch;
   highly available, deploy it on a cluster.
  </para>

  <para>
   The following attributes can be configured for &o_orch;:
  </para>

  <variablelist>
   <varlistentry>
    <term><guimenu>Verbose Logging</guimenu>
    </term>
    <listitem>
     <para>
      Shows debugging output in the log files when set to
      <guimenu>true</guimenu>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>SSL Support: Protocol</term>
    <listitem>
     <para>
      Choose whether to encrypt public communication
      (<guimenu>HTTPS</guimenu>) or not (<guimenu>HTTP</guimenu>). If
      choosing <guimenu>HTTPS</guimenu>,refer to
      <xref linkend="sec.depl.ostack.keystone.ssl"/> for configuration
      details.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <figure>
   <title>The &o_orch; &Barcl;</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="depl_barclamp_heat.png" width="100%" format="png"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="depl_barclamp_heat.png" width="75%" format="png"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="sec.depl.ostack.heat.delegated_roles">
   <title>Enabling Identity Trusts Authorization (Optional)</title>
   <para>
    Heat uses Keystone Trusts to delegate a subset of user roles to the
    &o_orch; engine for deferred operations (see <link
    xlink:href="http://hardysteven.blogspot.de/2014/04/heat-auth-model-updates-part-1-trusts.html">Steve
    Hardy's blog</link> for details ). It can either delegate all user
    roles or only those specified in the
    <literal>trusts_delegated_roles</literal> setting. Consequently, all roles
    listed in <literal>trusts_delegated_roles</literal> need to be assigned to
    a user, otherwise the user will not be able to use &o_orch;.
   </para>
   <para>
    The recommended setting for <literal>trusts_delegated_roles</literal> is
    <literal>Member</literal>, since this is the default role most users are
    likely to have. This is also the default setting when installing &cloud;
    from scratch.
   </para>
   <para>
    On installations where this setting is introduced through an upgrade,
    <literal>trusts_delegated_roles</literal> will be set to
    <literal>heat_stack_owner</literal>. This is a conservative choice to
    prevent breakage in situations where unprivileged users may already have
    been assigned the <literal>heat_stack_owner</literal> role to enable them
    to use Heat but lack the <literal>Member</literal> role. As long as you can
    ensure that all users who have the <literal>heat_stack_owner</literal> role
    also have the <literal>Member</literal> role, it is both safe and
    recommended to change trusts_delegated_roles to <literal>Member</literal>,
    since the latter is the default role assigned by our hybrid LDAP back-end
    among others.
   </para>
   <para>
    To view or change the trusts_delegated_role setting you need to open the
    &o_orch; &barcl; and click <guimenu>Raw</guimenu> in the
    <guimenu>Attributes</guimenu> section. Search for the
    <literal>trusts_delegated_roles</literal> setting and modify the list
    of roles as desired.
   </para>
   <figure>
    <title>the &o_orch; &barcl;: Raw Mode</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="depl_barclamp_heat_raw.png" width="100%" format="png"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="depl_barclamp_heat_raw.png" width="75%" format="png"/>
     </imageobject>
    </mediaobject>
   </figure>

   <warning>
    <title>Empty Value</title>
    <para>
     An empty value for <literal>trusts_delegated_roles</literal> will delegate
     <emphasis>all</emphasis> of user roles to Heat. This may create a security
     risk for users who are assigned privileged roles, such as
     <literal>admin</literal>, because these privileged roles will also be
     delegated to the &o_orch; engine when these users create &o_orch; stacks.
    </para>
   </warning>
  </sect2>

  <sect2 xml:id="sec.depl.ostack.heat.ha">
   <title>&haSetup; for &o_orch;</title>
   <para>
    Making &o_orch; highly available requires no special
    configuration&mdash;it is sufficient to deploy it on a cluster.
   </para>
  </sect2>
 </sect1>
